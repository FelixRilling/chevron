"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(a){var b=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?"Chevron":arguments[0];_classCallCheck(this,a);var c=this;c.options={name:b},c.container={},c.cv={load:function(a,b,d){var e=!0;return c.cv.ut.each(a,function(a){!c.cv.exists(a)}),e&&b(),e},collect:function(a,b,d){var e={};return c.cv.ut.each(a,function(a){var f=c.container[a];c.cv.ut.isDefined(f)?e[a]=b(f):d(a)}),e},add:function(a,b,d,e,f){c.container[a]={dependencies:b||[],type:d||null,content:e||null,args:f||[],inject:{middleware:[],decorator:null},constructed:!1}},construct:function(a,b){var d=c.container[a],e=Object.create(d.prototype||Object.prototype);c.cv.ut.eachObject(b,function(a,b){e[b]=a.content}),d.content=d.content.apply(e,d.args)||e,d.constructed=!0},inject:function(a,b,d){c.container[a].inject[b].push(d)},hasType:function(a,b){return c.container[a].type===b},exists:function(a){return c.cv.ut.isDefined(c.container[a])},ut:{each:function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)},eachObject:function(a,b){for(var c=Object.keys(a),d=0,e=c.length;e>d;d++)b(a[c[d]],c[d],d)},isDefined:function(a){return"undefined"!=typeof a},log:function(a,b,c,d){var e=this.options.name+" "+b+" in "+c+" '"+a+"': "+d;if("error"===b)throw e}}}}return _createClass(a,[{key:"provider",value:function(a,b,c,d,e){var f=this;f.cv.load(b,function(){f.cv.exists(a)?f.cv.ut.log(a,"error",d,"service '"+a+"' already declared"):f.cv.add(a,b,d,c,e)},function(b){f.cv.ut.log(a,"error",d,"dependency '"+b+"' not found")})}},{key:"service",value:function(a,b,c){var d=this;return d.provider(a,b,c,"service")}},{key:"factory",value:function(a,b,c,d){var e=this;return d.unshift(null),e.provider(a,b,c,"factory",d)}},{key:"middleware",value:function(a,b){var c=this;return c.cv.ut.eachObject(c.container,function(d,e){c.cv.ut.isDefined(b)?b.includes(e)&&c.cv.inject(e,"middleware",a):c.cv.inject(e,"middleware",a)}),a}},{key:"access",value:function(a){var b=this,c=void 0,d=b.container[a],e={};return"service"===d.type?(e=b.cv.collect(d.dependencies,function(a){return a.content},function(c){b.cv.ut.log(a,"error",d.type,"dependency '"+c+"' not found")}),c=d.content.bind(e)):"factory"===d.type&&(e=b.cv.collect(d.dependencies,function(a){return a},function(c){b.cv.ut.log(a,"error",d.type,"dependency '"+c+"' not found")}),d.constructed||b.cv.construct(a,e),c=d.content),b.cv.ut.isDefined(d.inject.middleware)&&b.cv.ut.each(d.inject.middleware,function(b){b.call(e,d,a)}),c}},{key:"list",value:function(){return this.container}}]),a}();a.Chevron=b}(window);