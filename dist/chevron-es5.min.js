"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(a){var b=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?"Chevron":arguments[0],c=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];_classCallCheck(this,a);var d=this;d.options={name:b,lazy:c},d.container={},d.chevron={load:function(a,b,c){var e=!0;return d.chevron.util.each(a,function(a){d.chevron.exists(a)||d.options.lazy||(c(a),e=!1)}),e&&b(),e},bundle:function(a,b){var c={};return d.chevron.util.each(a,function(a){var e=void 0;(e=d.container[a].content)?c[a]=e:b(a)}),c},inject:function(a,b){d.container[a].inject.push(b)},hasType:function(a,b){return d.container[a].type===b},exists:function(a){return d.chevron.util.isDefined(d.container[a])},util:{each:function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)},eachObject:function(a,b){for(var c=Object.keys(a),d=0,e=c.length;e>d;d++)b(a[c[d]],d)},isDefined:function(a){return"undefined"!=typeof a},log:function(a,b,c,d,e){var f=a+" "+c+" in "+d+" '"+b+"': "+e;if("error"===c)throw f}}}}return _createClass(a,[{key:"provider",value:function(a,b,c,d,e){var f=this;f.chevron.load(b,function(){f.chevron.exists(a)?f.chevron.util.log(f.options.name,a,"error",d,"service '"+a+"' already declared"):e(a)},function(b){f.chevron.util.log(f.options.name,a,"error",d,"dependency '"+b+"' not found")})}},{key:"service",value:function(a,b,c){var d=this;return d.provider(a,b,c,"service",function(){d.container[a]={dependencies:b,type:"service",content:c,inject:[]}})}},{key:"factory",value:function(a,b,c,d){var e=this;return d.unshift(null),e.provider(a,b,c,"factory",function(){e.container[a]={dependencies:b,type:"factory",content:new(Function.prototype.bind.apply(c,d)),inject:[]}})}},{key:"middleware",value:function(a,b){var c=this,d=Object.keys(c.container);return c.chevron.util.eachObject(c.container,function(e,f){var g=d[f];c.chevron.util.isDefined(b)?b.includes(g)&&c.chevron.inject(g,a):c.chevron.inject(g,a)}),a}},{key:"access",value:function(a){var b=this,c=void 0,d=b.container[a];return"service"===d.type?!function(){var e=b.chevron.bundle(d.dependencies,function(c){b.chevron.util.log(b.options.name,a,"error","service","dependency '"+c+"' not found")});b.chevron.util.isDefined(d.inject)&&b.chevron.util.each(d.inject,function(b){b.call(e,d,a)}),c=d.content.bind(e)}():c=d.content,c}},{key:"list",value:function(){return this.container}}]),a}();a.Chevron=b}(window);