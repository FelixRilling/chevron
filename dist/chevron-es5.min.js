"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(a){var b=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?"cv":arguments[0];_classCallCheck(this,a);var c=this;c.name=b,c.container={},c.injects={middleware:[],decorator:[]},c.$c={add:function(a,b,d,e,f){var g=c.container[a]={name:a,type:d,dependencies:b||[],content:e,initialized:!1};"factory"===d&&(g.args=f||[])},prepare:function(a){var b={};return c.$c.fetchDependencies(a.dependencies,function(a){b[a.name]=c.$c.bundle(a,b).content},function(b){throw c.name+": error in "+a.name+": dependency '"+b+"' is missing"}),c.$c.bundle(a,b)},fetchDependencies:function(a,b,d){c.$u.each(a,function(a){if(c.$c.exists(a)){var e=c.$c.get(a);c.$c.hasDependencies(e)&&c.$c.fetchDependencies(e.dependencies,b,d),b(e)}else d(a)})},bundle:function a(b,d){var a=c.$u.filterObject(d,function(a,c){return b.dependencies.indexOf(c)!==-1});return b.initialized?b:c.$c.initialize(b,a)},initialize:function(a,b){return a=c.$c.execDecorator(a,b),"service"===a.type?!function(){var d=a.content;a.content=function(){return c.$c.execMiddleware(a,b),d.apply(b,arguments)}}():!function(){var d=Object.create(a.prototype||Object.prototype);c.$u.eachObject(b,function(a,b){d[b]=a}),a.content=a.content.apply(d,a.args)||d}(),a.initialized=!0,a},execMiddleware:function(a,b){c.$c.execInject("middleware",a,function(c){c.fn.call(b,a)})},execDecorator:function(a,b){return c.$c.execInject("decorator",a,function(c){a.content=c.fn.call(b,a.content)}),a},execInject:function(a,b,d){c.$u.each(c.injects[a],function(a){c.$c.injectorApplies(b.name,a)&&d(a)})},injectorApplies:function(a,b){return 0===b.applies.length||b.applies.indexOf(a)!==-1},exists:function(a){return c.$u.isDefined(c.container[a])},get:function(a){return c.container[a]},hasDependencies:function(a){return a.dependencies.length>0}},c.$u={each:function(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c)},eachObject:function(a,b){for(var c=Object.keys(a),d=0,e=c.length;d<e;d++)b(a[c[d]],c[d],d)},filterObject:function(a,b){var d={};return c.$u.eachObject(a,function(a,c,e){b(a,c,e)&&(d[c]=a)}),d},isDefined:function(a){return"undefined"!=typeof a}}}return _createClass(a,[{key:"provider",value:function(a,b,c,d,e){var f=this;if(f.$c.exists(a))throw f.name+": error in "+d+": service '"+a+"' is already defined";return f.$c.add(a,b,d,c,e),f}},{key:"service",value:function(a,b,c){return this.provider(a,b,c,"service")}},{key:"factory",value:function(a,b,c,d){return this.provider(a,b,c,"factory",d)}},{key:"injector",value:function(a,b,c){var d=this;return d.injects[a].push({fn:b,applies:c||[]}),d}},{key:"decorator",value:function(a,b){return this.injector("decorator",a,b)}},{key:"middleware",value:function(a,b){return this.injector("middleware",a,b)}},{key:"access",value:function(a){var b=this;if(b.$c.exists(a))return b.$c.prepare(b.$c.get(a)).content;throw b.name+": error accessing "+a+": '"+a+"' is not defined"}},{key:"list",value:function(){return this.container}}]),a}();a.Chevron=b}(window);