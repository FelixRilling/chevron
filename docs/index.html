<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Home - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Chevron.html">Chevron</a><ul class='methods'><li data-type='method'><a href="Chevron.html#getInjectableInstance">getInjectableInstance</a></li><li data-type='method'><a href="Chevron.html#hasInjectable">hasInjectable</a></li><li data-type='method'><a href="Chevron.html#hasInjectableInstance">hasInjectableInstance</a></li><li data-type='method'><a href="Chevron.html#registerInjectable">registerInjectable</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html##Scope">#Scope</a></li><li><a href="global.html#classBootstrapping">classBootstrapping</a></li><li><a href="global.html#DefaultBootstrappings">DefaultBootstrappings</a></li><li><a href="global.html#DefaultScopes">DefaultScopes</a></li><li><a href="global.html#functionBootstrapping">functionBootstrapping</a></li><li><a href="global.html#identityBootstrapping">identityBootstrapping</a></li><li><a href="global.html#Injectable">Injectable</a></li><li><a href="global.html#singletonScope">singletonScope</a></li></ul>
</nav>

<div id="main">
    

    



    


    <section class="package">
        <h3> </h3>		
    </section>









    



    <section class="readme">
        <article><h1>ChevronJS</h1>
<blockquote>
<p>A small TypeScript library for lazy dependency injection.</p>
</blockquote>
<h2>Introduction</h2>
<p>Chevron is a TypeScript library for lazy dependency injection inspired by the <a href="https://docs.angularjs.org/api/ng/type/angular.Module">AngularJS Module API</a> and <a href="https://www.baeldung.com/inversion-control-and-dependency-injection-in-spring">Spring's DI System</a>.</p>
<p><a href="https://felixrilling.github.io/chevron/">Docs</a></p>
<h2>Usage</h2>
<pre class="prettyprint source lang-shell"><code>npm install chevronjs
</code></pre>
<p>Basic usage:</p>
<pre class="prettyprint source lang-typescript"><code>import { Chevron } from &quot;chevronjs&quot;;

// Create a new chevron instance
const chevron = new Chevron();

const myFunction = () => {
    console.log(&quot;Hello world!&quot;);
};

// Register the myFunction variable as a plain injectable.
chevron.registerInjectable(myFunction);

// Retrieve injectable (could also be done using `chevron.getInjectableInstance(&quot;myFunction&quot;)`.
const myFunctionInstance = chevron.getInjectableInstance(myFunction);
</code></pre>
<p>Custom names can be set like this:</p>
<pre class="prettyprint source lang-typescript"><code>import { Chevron } from &quot;chevronjs&quot;;

const chevron = new Chevron();

const myFunction = () => {
    console.log(&quot;Hello world!&quot;);
};
chevron.registerInjectable(myFunction, {
    // A custom name can either be a string or another nameable value like a function.
    name: &quot;myCoolName&quot;
});

const myFunctionInstance = chevron.getInjectableInstance(&quot;myCoolName&quot;);
</code></pre>
<h3>Bootstrapping</h3>
<p>A core feature is bootstrapping, which describes the process how injectable instances are instantiated. The default bootstrapping is <code>DefaultBootstrappings.IDENTITY</code> which means that values are not modified during instantiation. When dealing with dependencies though (Chapter &quot;Dependencies&quot;), it is essential to have a bootstrapping process which allows usage of those dependencies: <code>DefaultBootstrappings.CLASS</code> allows class-like injectables to receive their dependencies as constructor parameters and <code>DefaultBootstrappings.FUNCTION</code> allows injectables that are plain functions to simply receive them as arguments.</p>
<pre class="prettyprint source lang-typescript"><code>import { Chevron, DefaultBootstrappings } from &quot;chevronjs&quot;;

const chevron = new Chevron();

const MyClass = class {
    private readonly modifier: number;

    public constructor() {
        this.modifier = 2;
    }

    public getDouble(n: number) {
        return n * this.modifier;
    }
};
chevron.registerInjectable(MyClass, {
    // Use the &quot;CLASS&quot; Bootstrapping to instantiate the value as class
    bootstrapping: DefaultBootstrappings.CLASS
});

const myClassInstance = chevron.getInjectableInstance(MyClass);
</code></pre>
<pre class="prettyprint source lang-typescript"><code>import { Chevron, DefaultBootstrappings } from &quot;chevronjs&quot;;

const chevron = new Chevron();

const multiply = (val: number) => val * 2;

const myFunction = () => multiply;
chevron.registerInjectable(myFunction, {
    // Use the &quot;FUNCTION&quot; Bootstrapping to instantiate the value as a function
    bootstrapping: DefaultBootstrappings.FUNCTION
});

const myFunctionInstance = chevron.getInjectableInstance(myFunction);
</code></pre>
<p>Bootstrapping can also be used to modify values during instantiation:</p>
<pre class="prettyprint source lang-typescript"><code>import { Chevron, DefaultBootstrappings } from &quot;chevronjs&quot;;

const chevron = new Chevron();

const myInjectable = 16;
chevron.registerInjectable(myInjectable, {
    bootstrapping: (val: number) => val * 2,
    name: &quot;val&quot;
});

const myFunctionInstance = chevron.getInjectableInstance(&quot;val&quot;);
</code></pre>
<h3>Dependencies</h3>
<p>When an injectable relies on others in order to be constructed, you can declare those as its dependencies:</p>
<pre class="prettyprint source lang-typescript"><code>import { Chevron, DefaultBootstrappings } from &quot;chevronjs&quot;;

const chevron = new Chevron();

type mathFnType = (a: number) => number;
const doublingFn: mathFnType = (a: number) => a * 2;

chevron.registerInjectable(doublingFn);

const MyClass = class {
    public constructor(private readonly doublingFnAsDep: mathFnType) {}

    public getDouble(n: number) {
        return this.doublingFnAsDep(n);
    }
};

/*
 * Register injectable with dependency - we could also use `[&quot;doublingFn&quot;]`.
 * We want MyClass to be instantiated by constructing it through the CLASS bootstrapping,
 * where we will have the dependencies as constructor parameters.
 */
chevron.registerInjectable(MyClass, {
    dependencies: [doublingFn],
    bootstrapping: DefaultBootstrappings.CLASS
});

// When retrieving, all dependencies will be resolved first.
const myClassInstance = chevron.getInjectableInstance(MyClass);
</code></pre>
<p>All dependencies and sub-dependencies will be resolved and instantiated if needed when retrieving an injectable that needs to be instantiated.</p>
<h3>Scopes</h3>
<p>Injectables can have scopes defining when new instances are created and reused; By default, <code>DefaultScopes.SINGLETON</code> is used, meaning only a single instance of each injectable will be created, which will be reused for every retrieval. There is also <code>DefaultScopes.PROTOTYPE</code> which is the opposite, creating a new instance for every single request.</p>
<pre class="prettyprint source lang-typescript"><code>import { Chevron, DefaultBootstrappings, DefaultScopes } from &quot;./src/main&quot;;

const chevron = new Chevron();

interface SessionContext {
    sessionId: string;
}

const MyClass = class {};

chevron.registerInjectable(MyClass, {
    bootstrapping: DefaultBootstrappings.CLASS,
    scope: DefaultScopes.PROTOTYPE
});

const myClassInstance1 = chevron.getInjectableInstance(MyClass);
const myClassInstance2 = chevron.getInjectableInstance(MyClass);
</code></pre>
<p>Scopes can be also be used to provide for example session based instances:</p>
<pre class="prettyprint source lang-typescript"><code>import { Chevron, DefaultBootstrappings } from &quot;./src/main&quot;;

const chevron = new Chevron();

interface SessionContext {
    sessionId: string;
}

const MySession = class {};

chevron.registerInjectable(MySession, {
    bootstrapping: DefaultBootstrappings.CLASS,
    // Define a custom scope to create scopes based on the property `sessionId` of the context.
    scope: (context: SessionContext) => context.sessionId
});

// Injectable retrieval can pass optional context data to influence scoping.
const mySessionInstanceFoo = chevron.getInjectableInstance(MySession, {
    sessionId: &quot;123&quot;
});
const mySessionInstanceBar = chevron.getInjectableInstance(MySession, {
    sessionId: &quot;987&quot;
});
const mySessionInstanceBarAgain = chevron.getInjectableInstance(MySession, {
    sessionId: &quot;987&quot;
});
</code></pre>
<p>Note that if a scope function returns <code>null</code>, a new instance that will not be re-used will be created.</p>
<h2>TypeScript Decorators</h2>
<p>Chevron provides also provides <a href="https://www.typescriptlang.org/docs/handbook/decorators.html">TypeScript Decorators</a> for its API.
Keep in mind that decorators are an experimental TypeScript feature and might not be fully stabilized yet.</p>
<pre class="prettyprint source lang-typescript"><code>import { Chevron, DefaultBootstrappings, Injectable } from &quot;./src/main&quot;;

const chevron = new Chevron();

// Same as chevron.registerInjectable(Foo, { bootstrapping: DefaultBootstrappings.CLASS });
@Injectable(chevron)
class Foo {
    public getFoo() {
        return &quot;foo&quot;;
    }
}

@Injectable(chevron, {
    dependencies: [Foo]
})
class FooBar {
    public constructor(private readonly foo: Foo) {}

    public getFooBar() {
        return this.foo.getFoo() + &quot;bar&quot;;
    }
}

const fooBarInstance = chevron.getInjectableInstance(FooBar);
</code></pre></article>
    </section>






    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Sun Jan 26 2020 12:51:00 GMT+0100 (Central European Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>